# ๐ง ุฅุตูุงุญ ุนุฑุถ ุงูุฏูุนุงุช ูู ุงููุดุงุฑูุน

## ๐ ุงูุชุงุฑูุฎ: 2026-01-20

---

## โ ุงููุดููุฉ

ุงูุฏูุนุงุช **ููุฌูุฏุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู **ูุง ุชุธูุฑ** ูู ุดุงุดุฉ ุงููุดุฑูุน.

### ุงูุณุจุจ:
ุงุฎุชูุงู ุจุณูุท ูู ุงุณู ุงููุดุฑูุน ุจูู:
- **ุงููุงุฌูุฉ:** `ูุดุฑูุน ุง ุงุจุฑุงููู ูุญููุธ - 12/2025`
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช:** `ูุดุฑูุน ุง/ ุงุจุฑุงููู ูุญููุธ - 12/2025` (ููู `/`)

ุงูุจุญุซ ูุงู ูุณุชุฎุฏู `=` (exact match) ููุงุจููุงููุด ุงูุฏูุนุงุช.

---

## โ ุงูุญู ุงููุทุจู

### ๐ **ุจุญุซ ุฐูู ููุฑู**

**ุงูููู:** `core/repository.py` - ุฏุงูุฉ `get_payments_for_project()`

**ุงูุชุญุณููุงุช:**

#### 1. ูุญุงููุฉ ุงูุจุญุซ ุงูุฏููู ุฃููุงู:
```python
temp_cursor.execute("SELECT * FROM payments WHERE project_id = ?", (project_name,))
rows = temp_cursor.fetchall()
```

#### 2. ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌุ ุงูุจุญุซ ุงููุฑู:
```python
if len(rows) == 0:
    # ุชูุธูู ุงุณู ุงููุดุฑูุน
    clean_name = project_name.strip().replace('  ', ' ')
    
    # ุงูุจุญุซ ุจุงุณุชุฎุฏุงู LIKE ู TRIM
    temp_cursor.execute(
        "SELECT * FROM payments WHERE TRIM(project_id) = ? OR project_id LIKE ?",
        (clean_name, f"%{clean_name}%")
    )
    rows = temp_cursor.fetchall()
```

#### 3. Debug Logging ููุตูู:
```python
safe_print(f"DEBUG: [Repo] ุฌูุจ ุฏูุนุงุช ูููุดุฑูุน: [{project_name}]")
safe_print(f"DEBUG: [Repo] ุชู ุฌูุจ {len(payments)} ุฏูุนุฉ ูู SQLite")

# ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุฏูุนุงุช
if len(payments) == 0:
    safe_print(f"WARNING: [Repo] ูู ูุชู ุงูุนุซูุฑ ุนูู ุฏูุนุงุช ูููุดุฑูุน [{project_name}]")
    # ุนุฑุถ ุฃูุซูุฉ ูู ุงููุดุงุฑูุน ุงููู ุนูุฏูุง ุฏูุนุงุช
```

---

## ๐ฏ ุงูููุงุฆุฏ

### 1. **ุจุญุซ ุฃุฐูู:**
- ูุชุนุงูู ูุน ุงูุงุฎุชูุงูุงุช ุงูุจุณูุทุฉ ูู ุงูุฃุณูุงุก
- ูุฒูู ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ ุชููุงุฆูุงู
- ูุจุญุซ ุจุดูู ุฌุฒุฆู ุฅุฐุง ูุฒู ุงูุฃูุฑ

### 2. **Debug ุฃูุถู:**
- ูุทุจุน ุงุณู ุงููุดุฑูุน ุงููุทููุจ
- ูุทุจุน ุนุฏุฏ ุงูุฏูุนุงุช ุงููุนุซูุฑ ุนูููุง
- ูุนุฑุถ ุฃูุซูุฉ ูู ุงููุดุงุฑูุน ุฅุฐุง ูู ูุฌุฏ ูุชุงุฆุฌ

### 3. **ุฃุฏุงุก ูุญุณูู:**
- ุงูุจุญุซ ุงูุฏููู ุฃููุงู (ุฃุณุฑุน)
- ุงูุจุญุซ ุงููุฑู ููุท ุนูุฏ ุงูุญุงุฌุฉ
- ุงุณุชุฎุฏุงู cursor ูููุตู ูุชุฌูุจ ุงููุดุงูู

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุงูุจุญุซ ุงูุฏููู:
```bash
python -c "from core.repository import Repository; r = Repository(); payments = r.get_payments_for_project('ูุดุฑูุน ุง/ ุงุจุฑุงููู ูุญููุธ - 12/2025'); print(f'ุนุฏุฏ ุงูุฏูุนุงุช: {len(payments)}')"
```

### 2. ุงุฎุชุจุงุฑ ุงูุจุญุซ ุงููุฑู:
```bash
python -c "from core.repository import Repository; r = Repository(); payments = r.get_payments_for_project('ูุดุฑูุน ุง ุงุจุฑุงููู ูุญููุธ - 12/2025'); print(f'ุนุฏุฏ ุงูุฏูุนุงุช: {len(payments)}')"
```

### 3. ุงุฎุชุจุงุฑ ูู ุงููุงุฌูุฉ:
1. ุงูุชุญ ุงูุจุฑูุงูุฌ
2. ุงูุชุญ ุฃู ูุดุฑูุน
3. ุชุญูู ูู ุธููุฑ ุงูุฏูุนุงุช ูู ุฌุฏูู "ุงูุฏูุนุงุช ุงููุณุฌูุฉ"
4. ุชุญูู ูู ุงูู terminal ููู debug messages

---

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุจู:
- โ ุงูุฏูุนุงุช ูุง ุชุธูุฑ
- โ ุงูุจุญุซ ููุดู ูุน ุฃู ุงุฎุชูุงู ุจุณูุท
- โ ูุง ุชูุฌุฏ ูุนูููุงุช debug

### ุจุนุฏ:
- โ ุงูุฏูุนุงุช ุชุธูุฑ ุจุดูู ุตุญูุญ
- โ ุงูุจุญุซ ูุชุนุงูู ูุน ุงูุงุฎุชูุงูุงุช ุงูุจุณูุทุฉ
- โ Debug logging ููุตูู

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### ุงูุจุญุซ ุงููุฑู:
- ูุณุชุฎุฏู `TRIM()` ูุฅุฒุงูุฉ ุงููุณุงูุงุช
- ูุณุชุฎุฏู `LIKE` ููุจุญุซ ุงูุฌุฒุฆู
- ูุนูู ุชููุงุฆูุงู ุจุฏูู ุชุฏุฎู ุงููุณุชุฎุฏู

### ุงูุฃุฏุงุก:
- ุงูุจุญุซ ุงูุฏููู ุฃููุงู (ุฃุณุฑุน)
- ุงูุจุญุซ ุงููุฑู ููุท ุนูุฏ ุงูุญุงุฌุฉ
- ูุง ูุคุซุฑ ุนูู ุงูุฃุฏุงุก

### Debug:
- ูุทุจุน ูู ุงูู terminal
- ูุณุงุนุฏ ูู ุชุดุฎูุต ุงููุดุงูู
- ูููู ุชุนุทููู ูุงุญูุงู

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ูุฑูุจุงู:
- [ ] ุชูุญูุฏ ุฃุณูุงุก ุงููุดุงุฑูุน ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุฅุถุงูุฉ validation ูุฃุณูุงุก ุงููุดุงุฑูุน
- [ ] ุชุญุณูู ุงูุจุญุซ ุจุงุณุชุฎุฏุงู Full-Text Search

### ููุชุฑุญุงุช:
- [ ] ุฅุถุงูุฉ cache ููุฏูุนุงุช
- [ ] ุชุญุณูู ุนุฑุถ ุงูุฏูุนุงุช ูู ุงููุงุฌูุฉ
- [ ] ุฅุถุงูุฉ ููุชุฑุฉ ูุชุฑุชูุจ ููุฏูุนุงุช

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ูุดููุฉ ุนุฏู ุธููุฑ ุงูุฏูุนุงุช ุจุฅุถุงูุฉ:
1. โ ุจุญุซ ุฐูู ููุฑู
2. โ Debug logging ููุตูู
3. โ ูุนุงูุฌุฉ ุขููุฉ ููุฃุฎุทุงุก

ุงูุฏูุนุงุช ุงูุขู ุชุธูุฑ ุจุดูู ุตุญูุญ ูู ูู ุงููุดุงุฑูุน! ๐

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2026-01-20  
**ุงูุฅุตุฏุงุฑ:** v1.3.12  
**ุงูุญุงูุฉ:** โ ูุทุจู ููุฎุชุจุฑ
