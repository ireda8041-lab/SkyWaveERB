# ๐ง ุฅุตูุงุญุงุช Context Menu ูุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ

## ๐ ุงูุชุงุฑูุฎ: 2026-01-20

---

## โ ุงููุดุงูู

### 1. **RuntimeError: QTableWidget deleted**
```
RuntimeError: wrapped C/C++ object of type QTableWidget has been deleted
```
- ูุญุฏุซ ุนูุฏ ุฅุบูุงู ูุงูุฐุฉ ูููุง ุฌุฏูู
- ุงูู context menu ูุญุงูู ุงููุตูู ูุฌุฏูู ูุญุฐูู
- ูุณุจุจ crash ููุจุฑูุงูุฌ

### 2. **ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ ูุงูุตุฉ**
- ุญูู `company_tagline` (ุงูุดุนุงุฑ) ูุด ููุฌูุฏ ูู ุงููุงุฌูุฉ
- ุงูุฅุนุฏุงุฏุงุช ูู `skywave_settings.json` ูุด ุจุชุธูุฑ ูุงููุฉ

---

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ๐ก๏ธ **ุฅุตูุงุญ Context Menu**

**ุงูููู:** `core/context_menu.py`

**ุงููุดููุฉ:**
```python
# ูุจู - ูุณุจุจ crash
if self.table and obj == self.table.viewport():
    # ุงูููุฏ...
```

**ุงูุญู:**
```python
# ุจุนุฏ - ูุญูู ูู ุงูุฃุฎุทุงุก
try:
    if self.table and not self.table.isVisible():
        return False
        
    if self.table and obj == self.table.viewport():
        # ุงูููุฏ...
except RuntimeError:
    # ุงูู table ุชู ุญุฐูู - ุชุฌุงูู ุงูุฎุทุฃ
    return False
```

**ุงูููุงุฆุฏ:**
- โ ูุง ูุฒูุฏ ูู ุงูู crashes
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏูู ูุจู ุงููุตูู ูู
- โ ูุนุงูุฌุฉ ุขููุฉ ููุฃุฎุทุงุก

---

### 2. ๐ **ุฅุถุงูุฉ ุญูู ุงูุดุนุงุฑ (Tagline)**

**ุงูููู:** `ui/settings_tab.py`

**ุงูุชุบููุฑุงุช:**

#### ูู `setup_company_tab()`:
```python
# ุฅุถุงูุฉ ุญูู ุงูุดุนุงุฑ
tagline_lbl = QLabel("โจ ุงูุดุนุงุฑ")
tagline_lbl.setStyleSheet(label_style)
self.company_tagline_input = QLineEdit()
self.company_tagline_input.setPlaceholderText("ููุงูุฉ ุชุณููู ุฑููู ูุชูุงููุฉ")
self.company_tagline_input.setStyleSheet(input_style)
```

#### ูู `load_settings_data()`:
```python
self.company_tagline_input.setText(settings.get("company_tagline", ""))
```

#### ูู `save_settings()`:
```python
new_settings = {
    "company_name": self.company_name_input.text(),
    "company_tagline": self.company_tagline_input.text(),  # โ ุฌุฏูุฏ
    "company_address": self.company_address_input.text(),
    # ...
}
```

---

## ๐ ุงูุญููู ุงููุชุงุญุฉ ุงูุขู

### ุจูุงูุงุช ุงูุดุฑูุฉ ุงูุฃุณุงุณูุฉ:
1. ๐ข **ุงุณู ุงูุดุฑูุฉ** - `company_name`
2. โจ **ุงูุดุนุงุฑ** - `company_tagline` (ุฌุฏูุฏ!)
3. ๐ **ุงูุนููุงู** - `company_address`
4. ๐ฑ **ุฑูู ุงููุงุชู** - `company_phone`
5. ๐ง **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** - `company_email`
6. ๐ **ูููุน ุงูุดุฑูุฉ** - `company_website`
7. ๐ข **ุงูุฑูู ุงูุถุฑูุจู** - `company_vat`

### ุจูุงูุงุช ุงูุฏูุน:
8. ๐ฆ **ุงุณู ุงูุจูู** - `bank_name`
9. ๐ณ **ุฑูู ุงูุญุณุงุจ** - `bank_account`
10. ๐ฒ **ููุฏุงููู ูุงุด** - `vodafone_cash`

### ุงูุดุนุงุฑ:
11. ๐ผ๏ธ **ุดุนุงุฑ ุงูุดุฑูุฉ** - `company_logo_path` & `company_logo_data`

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ Context Menu:
1. ุงูุชุญ ุฃู ุชุงุจ ููู ุฌุฏูู (ูุดุงุฑูุนุ ุนููุงุกุ ุฅูุฎ)
2. ุงุถุบุท ูููู ูููู ุนูู ุงูุฌุฏูู
3. ุฃุบูู ุงููุงูุฐุฉ
4. โ ูุง ููุฌุฏ crash

### 2. ุงุฎุชุจุงุฑ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ:
1. ุงูุชุญ ุชุงุจ "ุงูุฅุนุฏุงุฏุงุช"
2. ุงุฎุชุฑ "ุจูุงูุงุช ุงูุดุฑูุฉ"
3. โ ุชุญูู ูู ุธููุฑ ุญูู "ุงูุดุนุงุฑ"
4. ุฃุฏุฎู ุงูุจูุงูุงุช ูู `skywave_settings.json`:
   - ุงุณู ุงูุดุฑูุฉ: Sky Wave
   - ุงูุดุนุงุฑ: ููุงูุฉ ุชุณููู ุฑููู ูุชูุงููุฉ
   - ุงูุนููุงู: ุงููุงูุฑุฉ - ุฏููุงุท ุงูุฌุฏูุฏู
   - ุงููุงุชู: 01067894321 - 01021965200
   - ุงูุจุฑูุฏ: skywaveads@hotmail.com
   - ุงููููุน: www.skywaveads.com/
5. ุงุถุบุท "ุญูุธ"
6. โ ุชุญูู ูู ุญูุธ ุงูุจูุงูุงุช

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. **core/context_menu.py**
   - ุฅุถุงูุฉ try-catch ููุญูุงูุฉ ูู RuntimeError
   - ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏูู ูุจู ุงููุตูู ูู

2. **ui/settings_tab.py**
   - ุฅุถุงูุฉ ุญูู `company_tagline`
   - ุชุญุฏูุซ `load_settings_data()`
   - ุชุญุฏูุซ `save_settings()`
   - ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูุญููู

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### Context Menu:
- ุงูุฅุตูุงุญ ูุญูู ูู ูู ุฃููุงุน ุงูู crashes ุงููุชุนููุฉ ุจุงูุฌุฏุงูู ุงููุญุฐููุฉ
- ูุนูู ุชููุงุฆูุงู ูุน ูู ุงูุฌุฏุงูู ูู ุงูุจุฑูุงูุฌ
- ูุง ุญุงุฌุฉ ูุฃู ุชุนุฏููุงุช ุฅุถุงููุฉ

### ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ:
- ูู ุงูุญููู ูู `skywave_settings.json` ูุชุงุญุฉ ุงูุขู
- ุงูุจูุงูุงุช ุชูุญูุธ ุชููุงุฆูุงู ูู ุงูููู
- ูููู ุชุนุฏูููุง ูู ุงููุงุฌูุฉ ูุจุงุดุฑุฉ

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ูุฑูุจุงู:
- [ ] ุฅุถุงูุฉ ุญูู "ุงูููุงุญุธุงุช ุงูุงูุชุฑุงุถูุฉ" (`default_notes`)
- [ ] ูุนุงููุฉ ุงูุดุนุงุฑ ูู ุงูููุงุชูุฑ
- [ ] ุชุตุฏูุฑ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ูุดููุชูู ุฑุฆูุณูุชูู:
1. โ Context Menu ูุญูู ูู ุงูู crashes
2. โ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ ูุงููุฉ ูุน ุญูู ุงูุดุนุงุฑ

ุงูุจุฑูุงูุฌ ุงูุขู ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2026-01-20  
**ุงูุฅุตุฏุงุฑ:** v1.3.12  
**ุงูุญุงูุฉ:** โ ูุทุจู ููุฎุชุจุฑ
